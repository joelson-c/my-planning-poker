generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum CardTypes {
  FIBONACCI
  SIZES
}

enum RoomState {
  VOTING
  REVEAL
}

model VotingRoom {
  id                String       @id @default(uuid(7)) @db.Uuid
  cardType          CardTypes    @default(FIBONACCI)
  state             RoomState    @default(VOTING)
  acceptConnections Boolean      @default(true)
  users             VotingUser[]
  createdAt         DateTime     @default(now())
}

model VotingUser {
  id          String      @id @default(uuid()) @db.Uuid
  room        VotingRoom? @relation(fields: [roomId], references: [id], onDelete: Cascade)
  roomId      String?     @db.Uuid
  nickname    String
  isAdmin     Boolean     @default(false)
  isObserver  Boolean     @default(false)
  vote        String?
  connectedAt DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
}
